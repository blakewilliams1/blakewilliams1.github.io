import{Ca as u,Ja as f,Ma as r,cc as c,ia as n,lb as l,wa as a}from"./chunk-HRFDIH2O.js";var S=(()=>{class e{constructor(i,t){this.element=i,this.platformId=t,this.imgurId="",this.isLandscape=!1,this.imgurUrlPattern="https://imgur.com/",this.imageSizesToImgurSuffixArray=[{width:320,suffix:"m"},{width:640,suffix:"l"},{width:1024,suffix:"h"}],this.lastCalculatedSuffix=void 0,this.lastCalculatedWidth=0,this.afterViewInitFinished=!1,this.isBrowser=c(this.platformId)}ngAfterViewInit(){this.imgurId=="GVJ06OK"&&console.log("ngAfterViewInit"),this.calculateSrcAttribute(),this.afterViewInitFinished=!0}onResize(i){!this.afterViewInitFinished||!this.isBrowser||this.calculateSrcAttribute()}calculateSrcAttribute(){let i=this.element.nativeElement.width;if(this.isLandscape&&(i=i*16/9),i<this.lastCalculatedWidth)return;this.imgurId=="GVJ06OK"&&console.log("rendered width: "+i);let t=this.chooseSuffix(i);if(this.lastCalculatedSuffix!=null&&t==this.lastCalculatedSuffix)return;this.lastCalculatedSuffix=t,this.lastCalculatedWidth=i;let s=`${this.imgurUrlPattern}${this.imgurId}${t}.jpg`;this.element.nativeElement.setAttribute("src",s)}chooseSuffix(i){for(let t of this.imageSizesToImgurSuffixArray)if(!(i>t.width))return t.suffix;return""}static{this.\u0275fac=function(t){return new(t||e)(r(a),r(u))}}static{this.\u0275dir=n({type:e,selectors:[["","imgurId",""]],hostBindings:function(t,s){t&1&&l("resize",function(d){return s.onResize(d)},!1,f)},inputs:{imgurId:"imgurId",isLandscape:"isLandscape"},standalone:!0})}}return e})();export{S as a};
